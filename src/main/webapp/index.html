<!DOCTYPE html>
<meta charset="utf-8">
<style>
	.node {
		stroke: #fff;
		stroke-width: 1.5px;
	}

	.link {
		stroke: #999;
		stroke-opacity: .6;
	}

</style>
<body>
	<script src="http://d3js.org/d3.v3.min.js"></script>
	<script>
		function loadGenealogy(id) {
			var width = 960, height = 500;

			var color = d3.scale.category20();

			var force = d3.layout.force().charge(-120).linkDistance(30).size([width, height]);

			d3.select("#d3container").selectAll("*").remove();

			var svg = d3.select("#d3container").append("svg").attr("width", width).attr("height", height);

			d3.json("/genealogy?id=" + id, function(error, graph) {
				force.nodes(graph.nodes).links(graph.links).start();

				var link = svg.selectAll(".link").data(graph.links).enter().append("line").attr("class", "link").style("stroke-width", function(d) {
					return 1.0;
				});

				var node = svg.selectAll(".node").data(graph.nodes).enter().append("circle").attr("class", "node").attr("r", 5).style("fill", function(d) {
					return color(3);
				}).call(force.drag);

				node.append("title").text(function(d) {
					return d.id;
				});

				force.on("tick", function() {
					link.attr("x1", function(d) {
						return d.beforeElementId.x;
					}).attr("y1", function(d) {
						return d.beforeElementId.y;
					}).attr("x2", function(d) {
						return d.afterElementId.x;
					}).attr("y2", function(d) {
						return d.afterElementId.y;
					});

					node.attr("cx", function(d) {
						return d.x;
					}).attr("cy", function(d) {
						return d.y;
					});
				});
			});
		}
	</script>

	Enter genealogy ID:
	<input type="text" id="txtId"/>
	<input type="button" id="btnLoad" value="load" onclick="loadGenealogy(document.getElementById('txtId').value)"/>

	<div id="d3container"></div>

</body>